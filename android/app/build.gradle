plugins {
    id "com.android.application"
    id "kotlin-android"
    // Flutter plugin must come AFTER the Android & Kotlin plugins
    id "dev.flutter.flutter-gradle-plugin"
    id "com.google.gms.google-services"
}

android {
    namespace "com.example.visit_sri_lanka_travel_guide_app"

    /* -------- Android / Material requirements -------- */
    compileSdk 34                      // 33 or higher
    ndkVersion flutter.ndkVersion

    defaultConfig {
        applicationId "com.example.visit_sri_lanka_travel_guide_app"
        minSdk 23                      // Stripe + Google Pay need 21+
        targetSdk 34
        versionCode flutter.versionCode
        versionName flutter.versionName
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions { jvmTarget = "1.8" }

    buildTypes {
        release {
            signingConfig signingConfigs.debug   // TODO: replace with your release config
            minifyEnabled false
        }
    }
}

flutter {
    source "../.."
}

dependencies {
    /* ---------- Firebase BoM (keeps every Firebase lib in sync) ---------- */
    implementation platform("com.google.firebase:firebase-bom:33.12.0")

    /* ---------- Kotlin BoM ---------- */
    implementation platform("org.jetbrains.kotlin:kotlin-bom:1.8.0")

    /* ---------- Material Components (MUST be ≥ 1.4 for Stripe) ---------- */
    implementation "com.google.android.material:material:1.11.0"

    /* ---------- AndroidX Fragment / Activity (needed for FlutterFragmentActivity) ---------- */
    implementation "androidx.activity:activity-ktx:1.8.2"
    implementation "androidx.fragment:fragment-ktx:1.6.2"
}
